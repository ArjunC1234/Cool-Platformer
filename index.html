<!DOCTYPE html>
<html>
  <head>
    <title>socketio temp made from easy chat cuz i couldnt figure it out</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      h1 {
        font-family : "Verdana";
        font-size : 30px;
        width : max-content;
      }
      input {
        width : 400px;
        height : 30px;
        font-size : 20px;
      }
      #user {
        width : 100px;
      }
      p {
        padding:5px;
        padding-left : 8px;
        padding-right : 8px;
        font-family: cursive;
        border-radius : 5px;
        color : white;
        margin:5px;
        max-width : 300px;
        background-color : blue;
      }
      name {
        position : relative;
        top : -8px;
        left : 7px;
        font-size : 17px;
        color : gray;
      }
      .msg {
        margin-bottom : 10px;
      }
    </style>
  </head>
  <body>
    <!--TYPE HTML HERE-->
    <h1 id="title">
      Welcome to my first chat room in socket.io
    </h1>
    <input type="text" id="user" placeholder="type name here" maxlength="20">
    <input type="text" id="chatinput" placeholder="type text here">
    <div class="logs" id="chatlog"></div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io();
      //type js here
      document.getElementById("chatinput").addEventListener("keyup", function (e) {
        console.log("pressed")
        if (e.key == "Enter" && document.getElementById("chatinput").value.trim() != '' && document.getElementById("user").value.trim() != '') {
          let msg = document.getElementById("chatinput").value
          let name = document.getElementById("user").value
          socket.emit("chat message", name, msg)
          document.getElementById("chatinput").value = ''
        }
      })
      socket.on("chat message", function(name, msg) {
        let ele = document.createElement("p")
        let div = document.createElement("div")
        div.style.class = "msg"
        let nameele = document.createElement("name")
        ele.innerHTML = msg
        nameele.innerHTML = name
        div.appendChild(ele)
        div.appendChild(nameele)
        document.getElementById("chatlog").appendChild(div)
        console.log(arg)
      })
    </script>
  </body>
</html>
