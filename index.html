<!DOCTYPE html>
<html>
  <head>
    <title>socketio temp made from easy chat cuz i couldnt figure it out</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
      h1 {
        font-family : "Verdana";
        font-size : 30px;
        width : max-content;
      }
      input {
        width : 400px;
        height : 30px;
        font-size : 20px;
      }
      #user {
        width : 100px;
      }
      p {
        color : white;
        margin:5px;
        width : max-content;
        height : min-content + 25px;
        border-radius : 12px;
        background-color : blue;
      }
    </style>
  </head>
  <body>
    <!--TYPE HTML HERE-->
    <h1 id="title">
      Welcome to my first chat room in socket.io
    </h1>
    <input type="text" id="user" placeholder="type name here" maxlength="20">
    <input type="text" id="chatinput" placeholder="type text here">
    <div class="logs" id="chatlog"></div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script>
      var socket = io();
      //type js here
      document.getElementById("chatinput").addEventListener("keyup", function (e) {
        console.log("pressed")
        if (e.key == "Enter" && document.getElementById("chatinput").value.trim() != '' && document.getElementById("user").value.trim() != '') {
          let msg = document.getElementById("chatinput").value
          let name = document.getElementById("user").value
          let str = name + ": " + msg
          console.log("pressed")
          socket.emit("chat message", str.toString())
          document.getElementById("chatinput").value = ''
        }
      })
      socket.on("chat message", function(arg) {
        let ele = document.createElement("p")
        ele.innerHTML = arg
        document.getElementById("chatlog").appendChild(ele)
        console.log(arg)
      })
    </script>
  </body>
</html>
