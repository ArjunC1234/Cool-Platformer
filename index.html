<!DOCTYPE html>
<html>
  <head>
    <title>socketio temp made from easy chat cuz i couldnt figure it out</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style>
    </style>
  </head>
  <body>
    <!--TYPE HTML HERE-->
    
    <script src="/socket.io/socket.io.js"></script>
    <script>
      function Corcle(id) {
        let color = '#'+(Math.random() * 0xFFFFFF << 0).toString(16).padStart(6, '0');
        let ele = document.createElement("div")
        ele.style = `position: absolute; left: 100px; top: 100px; width : 100px; height : 100px; border-radius: 25px; background-color: ${color};`
        ele.id = id
        document.body.appendChild(ele)
      }
      var socket = io();
      var client_users = []
      socket.on("user joined", function (id, users) {
        client_users = users
        Corcle(id)
      })
      socket.on("user left", function (id, users) {
        client_users = users
        document.getElementById(id).remove()
      })
      socket.on("updateGame", function (users) {
        if (users.length > 0) {
          var client_users = users
          for (var i = 0; i < client_users.length; i++) {
            let user = client_users[i]
            document.getElementById(user.id).style.left = user.data.x
            document.getElementById(user.id).style.top = user.data.y
          }
        }
      })
      var w = false
      var s = false
      var a = false
      var d = false
      window.addEventListener("keydown", function (e) {
        if (e.key == "w") {
          w = true
        }
        if (e.key == "s") {
          s = true
        }
        if (e.key == "a") {
          a = true
        }
        if (e.key == "d") {
          d = true
        }
      })
      window.addEventListener("keyup", function (e) {
        if (e.key == "w") {
          w = false
        }
        if (e.key == "s") {
          s = false
        }
        if (e.key == "a") {
          a = false
        }
        if (e.key == "d") {
          d = false
        }
      })
      setInterval(function() {
        if (w) {
          socket.emit('updateUser', "y", -3)
        }
        if (s) {
          socket.emit('updateUser', "y", 3)
        }
        if (a) {
          socket.emit('updateUser', "x", -3)
        }
        if (d) {
          socket.emit('updateUser', "x", 3)
        }
      }, 10)
    </script>
  </body>
</html>